<!DOCTYPE html>
<html lang="ru">
<head>‚Ä¶ (—Å—Ç–∏–ª–∏ –∫–∞–∫ —Ä–∞–Ω–µ–µ) ‚Ä¶</head>
<body>
  <!-- WhatsApp, —à–∞–ø–∫–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –ø–æ–∏—Å–∫ –∫–∞–∫ —Ä–∞–Ω—å—à–µ-->
  <div id="catalog"></div>
  <div class="admin-panel" id="adminPanel">
    <div class="admin-note">üîí –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞</div>
    <h3>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h3>
    <input id="idInput" placeholder="ID/–ê—Ä—Ç–∏–∫—É–ª">
    <input id="categoryInput" placeholder="–ö–∞—Ç–µ–≥–æ—Ä–∏—è">
    <input id="nameInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ">
    <input id="priceInput" placeholder="–¶–µ–Ω–∞">
    <input id="imgInput" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ">
    <button onclick="addProduct()">–î–æ–±–∞–≤–∏—Ç—å</button>
    <button onclick="toggleArchive()">–ü–æ–∫–∞–∑–∞—Ç—å/–°–∫—Ä—ã—Ç—å –∞—Ä—Ö–∏–≤</button>
  </div>
  <script>
    const adminPassword = "admin2025";
    let isArchiveVisible = false;
    let data = [ /* –ù–∞—á–∞–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã */ ];

    function authorizeAdmin() {
      const s = localStorage.getItem("isAdmin");
      if (s === "true") return true;
      if (confirm("–í—ã –∞–¥–º–∏–Ω?")) {
        const p = prompt("–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:");
        if (p === adminPassword) {
          localStorage.setItem("isAdmin", "true");
          return true;
        }
      }
      return false;
    }
    const isAdmin = authorizeAdmin();
    if (isAdmin) document.getElementById("adminPanel").style.display = "block";

    function render() {
      const catDiv = document.getElementById("catalog");
      catDiv.innerHTML = "";
      const grouped = {};
      data.forEach((item, i) => {
        if (item.archived && (!isAdmin || !isArchiveVisible)) return;
        if (!grouped[item.category]) grouped[item.category] = [];
        grouped[item.category].push({ ...item, index: i });
      });
      Object.keys(grouped).forEach(cat => {
        const h = document.createElement("div"); h.className="category-title"; h.textContent = cat;
        catDiv.appendChild(h);
        const cont = document.createElement("div"); cont.className="cards-container";
        grouped[cat].forEach(item => {
          const c = document.createElement("div"); c.className="card";
          c.innerHTML = `
            <img src="${item.img}" alt="${item.name}">
            <div class="title">${item.name}</div>
            <div class="id">ID: ${item.id}</div>
            <input type="text" value="${item.price}" onchange="updatePrice(${item.index}, this.value)"> ‚Ç∏
            ${isAdmin ? `<button onclick="toggleArchive(${item.index})">${item.archived ? "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" : "–ê—Ä—Ö–∏–≤"}</button>` : ""}
          `;
          cont.appendChild(c);
        });
        catDiv.appendChild(cont);
      });
    }

    function addProduct() {
      const obj = {
        id: document.getElementById("idInput").value.trim(),
        category: document.getElementById("categoryInput").value.trim() || "–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",
        name: document.getElementById("nameInput").value.trim(),
        price: document.getElementById("priceInput").value.trim(),
        img: document.getElementById("imgInput").value.trim() || "https://via.placeholder.com/120",
        archived: false
      };
      if (!obj.name || !obj.price) return alert("–ù–∞–∑–≤–∞–Ω–∏–µ –∏ —Ü–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã.");
      data.push(obj); render();
    }

    function updatePrice(i, v) { data[i].price = v; }
    function toggleArchive(i) { data[i].archived = !data[i].archived; render(); }
    function toggleArchive() { isArchiveVisible = !isArchiveVisible; render(); }

    document.getElementById("searchInput").oninput = () => {
      const val = document.getElementById("searchInput").value.toLowerCase();
      data = data.map((d, i) => ({ ...d, hidden: !d.name.toLowerCase().includes(val) }));
      render();
    };

    render();
  </script>
</body>
</html>
